<?xml version="1.0"?>
<launch>
	<!-- arguments -->
	<arg name="test" default="true" doc="" />
	<include file="$(find soma_tools)/launch/pcd_publish.launch">
		<arg name="file" value="$(find soma_localization)/data/Mirais-3DMap-imu-non-ground-adjusted.pcd" />
		<arg name="interval" value="3.0" />
		<arg name="frame_id" value="map" />
		<arg name="output" value="map_points" doc="" />
	</include>
	<node name="octomap_server_nodelet" pkg="nodelet" type="nodelet" output="screen" args="standalone octomap_server/OctomapServerNodelet">
		<param name="resolution" value="0.3" />
		<param name="frame_id" value="map" />
		<param name="pointcloud_min_z" value="0.1" />
		<param name="pointcloud_max_z" value="2.5" />
		<remap from="cloud_in" to="map_points" />
		<param name="filter_ground" value="false" />
	</node>
	<!-- for test -->
	<node if="$(arg test)" name="base2map" pkg="tf" type="static_transform_publisher" args="0 0 0 0 0 0 base_link map 2000" />
	<node name="global_costmap_node" pkg="soma_samples" type="sample_local_costmap" output="screen">
		<param name="costmap_ns" value="global_costmap" />
		<rosparam command="load" file="$(find soma_samples)/config/global_costmap.yaml" />
	</node>
</launch>
