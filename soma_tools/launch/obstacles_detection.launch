<?xml version="1.0"?>
<launch>
    <arg name="frame_id" default="camera_f_link" />
    <arg name="cloud_input" default="/depth/color/points"/>

	<node name="ob_detector_manager" pkg="nodelet" type="nodelet" args="manager" output="screen" />

	<node pkg="nodelet" type="nodelet" name="vg_filter" args="load pcl/VoxelGrid ob_detector_manager">
		<remap from="~input" to="$(arg cloud_input)" />
		<param name="input_frame" value="frame_id" />
		<param name="filter_field_name" value="z" />
		<param name="filter_limit_min" value="-10.0" />
		<param name="filter_limit_max" value="10.0" />
		<param name="leaf_size" value="0.1" />
		<param name="filter_limit_negative" value="false" />
	</node>

    <!-- <node pkg="nodelet" type="nodelet" name="points_xyz" args="standalone rtabmap_ros/point_cloud_xyz">
        <remap from="depth/image"         to="/depth/image_rect_raw"/>
        <remap from="depth/camera_info"   to="/depth/camera_info"/>
        <remap from="cloud"               to="voxel_cloud" />
        <param name="decimation"  type="double" value="4"/>
        <param name="voxel_size"  type="double" value="0.1"/>
        <param name="approx_sync" type="bool" value="false"/>
    </node> -->

    <node pkg="nodelet" type="nodelet" name="obstacles_detection"  
        args="load rtabmap_ros/obstacles_detection ob_detector_manager">
        <remap from="cloud" to="vg_filter/output"/>
        <!-- <remap from="cloud" to="voxel_cloud"/> -->
        <param name="frame_id" type="string" value="frame_id"/>
        <param name="wait_for_transform" type="bool" value="true"/>
		<!-- <param name="min_cluster_size" type="int" value="10"/> -->
		<!-- <param name="max_obstacles_height" type="double" value="0.5"/> -->
    </node>

</launch>
